(function(t){function e(e){for(var n,i,c=e[0],r=e[1],l=e[2],d=0,h=[];d<c.length;d++)i=c[d],o[i]&&h.push(o[i][0]),o[i]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(h.length)h.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var r=a[i];0!==o[r]&&(n=!1)}n&&(s.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},o={app:0},s=[];function i(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-2d0a3577":"15b80f4c","chunk-2d0a43df":"2e00c125","chunk-2d0aab07":"ec9eaa41","chunk-2d0abc00":"1e61764e","chunk-2d0ae937":"22b2ec66","chunk-2d0aeb45":"c571eeac","chunk-2d0afa49":"65108fc0","chunk-2d0b2762":"7faa5aa3","chunk-2d0b6187":"1b01ea3f","chunk-2d0ba136":"08ad9b83","chunk-2d0bb267":"7da55a18","chunk-2d0bcec1":"eed4b121","chunk-2d0bff92":"5eac84e3","chunk-2d0c0494":"b82491b3","chunk-2d0c0a09":"ab666bda","chunk-2d0c1ed0":"c7612dd8","chunk-2d0c4313":"734ea760","chunk-2d0c46d1":"a90d3520","chunk-2d0c512b":"c2655e61","chunk-2d0cf16e":"c3e2c753","chunk-2d0d056d":"34332182","chunk-2d0d0645":"5ba0a827","chunk-2d0d2f22":"0b0ad9f9","chunk-2d0d7e63":"967be54e","chunk-2d0e1b57":"9ca83b35","chunk-2d0e1fbe":"085b36f1","chunk-2d0e22d6":"f15418dd","chunk-2d0e542a":"f9c1a461","chunk-2d0e57ec":"db5e2796","chunk-2d0e6553":"e43be0ff","chunk-2d0ea098":"59254529","chunk-2d208ac5":"b30c459d","chunk-2d209408":"f92607b1","chunk-2d20f745":"2c8189f8","chunk-2d20ff23":"57e1f9e1","chunk-2d2138c7":"4a97aa4a","chunk-2d217e5b":"40de0dd2","chunk-2d21b84a":"4bfe2261","chunk-2d21dcd2":"64e0a422","chunk-2d21f327":"4df1e469","chunk-2d2214b3":"4f3fe061","chunk-2d221a34":"7ff16b79","chunk-2d22502a":"f9b13f63","chunk-2d228ca6":"741b4c1c","chunk-2d2295e9":"599758ba","chunk-2d22c171":"55accc8a","chunk-2d22c2b8":"fef13e00","chunk-2d22ca58":"fe58906c","chunk-2d2311f7":"3c951f38","chunk-2d2371be":"37f19019","chunk-2d237ee7":"3cd1af21","chunk-2d238465":"3860df71","chunk-7532b3ea":"d6aa1a5e"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a=o[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise(function(e,n){a=o[t]=[e,n]});e.push(a[2]=n);var s,r=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(t),s=function(e){l.onerror=l.onload=null,clearTimeout(d);var a=o[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src,i=new Error("Loading chunk "+t+" failed.\n("+n+": "+s+")");i.type=n,i.request=s,a[1](i)}o[t]=void 0}};var d=setTimeout(function(){s({type:"timeout",target:l})},12e4);l.onerror=l.onload=s,r.appendChild(l)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/static/",c.oe=function(t){throw console.error(t),t};var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0343":function(t,e,a){"use strict";var n=a("692e"),o=a.n(n);o.a},"034f":function(t,e,a){"use strict";var n=a("64a9"),o=a.n(n);o.a},"067f":function(t,e,a){},"0d50":function(t,e,a){"use strict";var n=a("2f76"),o=a.n(n);o.a},1:function(t,e){},"1a79":function(t,e,a){},"1aaf":function(t,e,a){},2:function(t,e){},"2f76":function(t,e,a){},"313f":function(t,e,a){"use strict";var n=a("521c"),o=a.n(n);o.a},"49e5":function(t,e,a){"use strict";var n=a("937f"),o=a.n(n);o.a},"4a0e":function(t,e,a){"use strict";var n=a("1aaf"),o=a.n(n);o.a},"521c":function(t,e,a){},5581:function(t,e,a){"use strict";var n=a("6ea4"),o=a.n(n);o.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],i={},c=i,r=(a("034f"),a("2877")),l=Object(r["a"])(c,o,s,!1,null,null,null);l.options.__file="App.vue";var d=l.exports,u=a("8c4f"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Layout",{staticClass:"main-layout"},[a("Sider",{ref:"mainSider",staticClass:"sider-bar",attrs:{"hide-trigger":"",collapsible:"","collapsed-width":50},model:{value:t.isCollapsed,callback:function(e){t.isCollapsed=e},expression:"isCollapsed"}},[a("div",{staticClass:"logo"},[a("span",[t._v(t._s(t.logo))])]),a("Divider",{staticClass:"sider-bar-divider"}),a("Menu",{class:t.menuitemClasses,attrs:{theme:"dark",width:"auto","active-name":"Inspector"}},t._l(t.menu,function(e,n){return a("MenuItem",{key:n,attrs:{name:e.name},nativeOn:{click:function(a){t.menuItemOnClick(e)}}},[a("b",[t._v(t._s(t.menuItemTitle(e)))])])}))],1),a("Layout",[a("Header",{staticClass:"main-header",attrs:{inline:""}},[a("Icon",{attrs:{type:"md-menu",color:"white",size:"24"},nativeOn:{click:function(e){return t.collapsedSider(e)}}})],1),a("Content",[a("div",{staticClass:"main-container"},[a("router-view")],1)]),a("Footer",{staticClass:"main-footer"})],1)],1)],1)},f=[],p=(a("7f7f"),{name:"MainLayout",data:function(){return{isCollapsed:!0}},mounted:function(){this.$store.dispatch("loadMenu")},computed:{menuitemClasses:function(){return["menu-item",this.isCollapsed?"collapsed-menu":"menu"]},logo:function(){return this.isCollapsed?"L":"Lyrebird"},menu:function(){return this.$store.state.menu}},methods:{collapsedSider:function(){this.$refs.mainSider.toggleCollapse()},menuItemTitle:function(t){return this.isCollapsed?t.name.substring(0,1):t.name},menuItemOnClick:function(t){"router"===t.type?this.$router.push(t.path):window.open(t.path,"_self")}}}),m=p,v=(a("0d50"),Object(r["a"])(m,h,f,!1,null,"164d8d33",null));v.options.__file="Main.vue";var g=v.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{staticClass:"button-bar"},[a("buttonBar")],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("flowList",{staticClass:"inspector-left",on:{"select-detail":t.selectedFlowChange}})],1),a("Col",{attrs:{span:"12"}},[a("flowDetail",{staticClass:"inspector-right",attrs:{flow:t.selectedFlow}})],1)],1)],1)},w=[],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("div",{staticStyle:{"max-height":"550px","overflow-y":"auto"}},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAll,expression:"selectAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectAll)?t._i(t.selectAll,null)>-1:t.selectAll},on:{change:function(e){var a=t.selectAll,n=e.target,o=!!n.checked;if(Array.isArray(a)){var s=null,i=t._i(a,s);n.checked?i<0&&(t.selectAll=a.concat([s])):i>-1&&(t.selectAll=a.slice(0,i).concat(a.slice(i+1)))}else t.selectAll=o}}})]),a("th",[t._v("Src")]),a("th",[t._v("Status")]),a("th",[t._v("Host")]),a("th",[t._v("Path")])])]),a("tbody",t._l(t.flowList,function(e){return a("flowListItem",{key:e.id,tag:"tr",class:t.rowClass(e),attrs:{flow:e,"selected-ids":t.selectedIds},on:{"item-checkbox-change":t.itemSelectChange},nativeOn:{click:function(a){t.selectFlow(e)}}})}))])])])},y=[],_=(a("ac4d"),a("8a81"),a("ac6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],attrs:{type:"checkbox",id:t.flow.id},domProps:{checked:Array.isArray(t.selected)?t._i(t.selected,null)>-1:t.selected},on:{change:function(e){var a=t.selected,n=e.target,o=!!n.checked;if(Array.isArray(a)){var s=null,i=t._i(a,s);n.checked?i<0&&(t.selected=a.concat([s])):i>-1&&(t.selected=a.slice(0,i).concat(a.slice(i+1)))}else t.selected=o}}})]),a("td",[a("span",{staticClass:"label",class:[t.responseSrcClass]},[t._v(t._s(t.responseSrc))])]),a("td",[a("strong",[a("span",{class:[t.codeClass]},[t._v(t._s(t.flow.response.code))])])]),a("td",[t._v("\n        "+t._s(t.flowContent.hostname)+"\n    ")]),a("td",[t._v("\n        "+t._s(t.flowContent.pathname)+"\n    ")])])}),k=[],C=(a("6762"),a("2fdb"),{name:"flowListItem",props:["flow","selectedIds"],data:function(){return{selected:!1}},watch:{selectedIds:function(){this.selected=this.selectedIds.indexOf(this.flow.id)>=0},selected:function(){this.$emit("item-checkbox-change",{id:this.flow.id,selected:this.selected})}},computed:{flowContent:function(){var t=document.createElement("a");return t.href=this.flow.request.url,t},codeClass:function(){var t=this.flow.response.code;return 200===t||t>=300&&t<=399?"text-success":"text-danger"},responseSrc:function(){var t=this.flow.response.mock;return t.includes("mock")?"mock":t.includes("proxy")?"proxy":"unknown"},responseSrcClass:function(){var t=this.flow.response.mock;return t.includes("mock")?"label-success":t.includes("proxy")?"label-default":"label-danger"}},methods:{}}),$=C,S=(a("49e5"),Object(r["a"])($,_,k,!1,null,null,null));S.options.__file="FlowListItem.vue";var x=S.exports,G=a("8055"),I=a.n(G),O={name:"flowList",components:{flowListItem:x},data:function(){return{flowList:[],originFlowList:[],selectAll:!1,foucsFlow:null}},mounted:function(){var t=I()(),e=this.reload;t.on("action",function(){console.log("Inspector On new action"),e()}),this.reload()},computed:{searchStr:function(){return this.$store.state.inspector.searchStr},selectedIds:function(){return this.$store.state.inspector.selectedIds}},watch:{selectAll:function(){if(this.$store.commit("clearSelectedId"),this.selectAll){var t=!0,e=!1,a=void 0;try{for(var n,o=this.flowList[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var s=n.value;this.$store.commit("addSelectedId",s.id)}}catch(i){e=!0,a=i}finally{try{t||null==o.return||o.return()}finally{if(e)throw a}}}},selectedIds:function(){this.selectedIds.length>0?this.$store.commit("showDataButtons",!0):this.$store.commit("showDataButtons",!1)},originFlowList:function(){this.refreshFlowList()},searchStr:function(){this.refreshFlowList()}},methods:{reload:function(){var t=this;this.$http.get("/api/flow").then(function(e){t.originFlowList=e.data},function(t){console.log("Inspector: reload failed",t)})},selectFlow:function(t){this.foucsFlow=t,this.$emit("select-detail",t)},itemSelectChange:function(t){console.log("Item select change",t),t.selected&&this.selectedIds.indexOf(t.id)<0?this.$store.commit("addSelectedId",t.id):!t.selected&&this.selectedIds.indexOf(t.id)>=0&&this.$store.commit("deleteSelectedId",t.id)},refreshFlowList:function(){this.flowList=[];var t=!0,e=!1,a=void 0;try{for(var n,o=this.originFlowList[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var s=n.value;s.request.url.indexOf(this.$store.state.inspector.searchStr)>=0&&this.flowList.push(s)}}catch(i){e=!0,a=i}finally{try{t||null==o.return||o.return()}finally{if(e)throw a}}},rowClass:function(t){return t&&this.foucsFlow?{foucs:t.id===this.foucsFlow.id}:{foucs:!1}}}},A=O,T=(a("8fe0"),Object(r["a"])(A,D,y,!1,null,null,null));T.options.__file="FlowList.vue";var L=T.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.flowDetail?a("Card",[a("Tabs",{attrs:{value:t.currentTab,animated:!1},on:{"on-click":t.switchTab}},[a("TabPane",{attrs:{label:"Request",name:"req"}}),a("TabPane",{attrs:{label:"RequestBody",name:"req-body"}}),a("TabPane",{attrs:{label:"Response",name:"resp"}}),a("TabPane",{attrs:{label:"ResponseBody",name:"resp-body"}})],1),t.flowDetail?a("code-editor",{staticStyle:{height:"500px"},attrs:{language:t.codeType,content:t.codeContent}}):t._e()],1):t._e()},B=[],N=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},j=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{width:"100%",height:"100%",border:"1px solid grey"},attrs:{id:"code-editor"}})])}],F=a("c2c6"),q={name:"codeEditor",model:{prop:"content",event:"change"},props:{content:null,language:{default:"javascript"},readOnly:{default:!1}},data:function(){return{editor:null}},watch:{content:function(t){console.log("Code editor: content change"),this.editor&&t!==this.editor.getValue()&&(F["editor"].setModelLanguage(this.editor.getModel(),this.language),this.editor.setValue(t),this.editor.trigger(this.editor.getValue(),"editor.action.formatDocument"))}},mounted:function(){var t=this;this.editor=F["editor"].create(this.$el.querySelector("#code-editor"),{value:this.content,language:this.language,theme:"vs",readOnly:this.readOnly}),this.editor.onDidChangeModelContent(function(e){var a=t.editor.getValue();t.value!==a&&t.$emit("change",a,e)})}},E=q,R=(a("b68c"),Object(r["a"])(E,N,j,!1,null,null,null));R.options.__file="CodeEditor.vue";var P=R.exports,J={name:"flowDetail",props:{flow:null},components:{codeEditor:P},data:function(){return{flowDetail:null,codeContent:null,codeType:"json",currentTab:"req"}},watch:{flow:function(){console.log("FlowDetail: flow changed"),this.getFlowDetail(this.flow.id)}},methods:{getFlowDetail:function(t){var e=this;this.$http.get("/api/flow/"+t).then(function(t){e.flowDetail=t.data,e.switchTab("req")},function(t){console.log("FlowDetail: get detail failed",t)})},switchTab:function(t){if(console.log("FLowDetail:switchTab",t),this.currentTab=t,"req"===t)this.codeContent=JSON.stringify(this.flowDetail.request,null,4),this.codeType="json";else if("req-body"===t)this.flowDetail.request.data?(this.codeContent=JSON.stringify(this.flowDetail.request.data,null,4),this.codeType="json"):(this.codeContent="",this.codeType="text");else if("resp"===t)this.codeContent=JSON.stringify(this.flowDetail.response,null,4),this.codeType="json";else if("resp-body"===t){if(null===this.flowDetail.response.data)return this.codeContent="",void(this.codeType="text");if(this.flowDetail.response.headers.hasOwnProperty("Content-Type")){var e=this.flowDetail.response.headers["Content-Type"];e.includes("html")?this.parseHtmlData(this.flowDetail.response.data):e.includes("xml")?this.parseXmlData(this.flowDetail.response.data):e.includes("json")?this.parseJsonData(this.flowDetail.response.data):this.parseTextData(this.flowDetail.response.data)}else this.parseTextData(this.flowDetail.response.data)}},parseJsonData:function(t){this.codeContent=JSON.stringify(t,null,4),this.codeType="json"},parseHtmlData:function(t){this.codeContent=this.flowDetail.response.data,this.codeType="html"},parseXmlData:function(t){this.codeContent=this.flowDetail.response.data,this.codeType="xml"},parseTextData:function(t){this.codeContent=this.flowDetail.response.data,this.codeType="text"}}},U=J,V=(a("f84e"),Object(r["a"])(U,M,B,!1,null,null,null));V.options.__file="FlowDetail.vue";var H=V.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{attrs:{padding:5}},[a("Tooltip",{attrs:{content:"Record http flow",delay:500}},[a("Button",{on:{click:t.switchRecord}},[a("Icon",{attrs:{type:t.recordingBtn.type,color:t.recordingBtn.color}})],1)],1),a("Tooltip",{attrs:{content:"Clear & reload flow list",delay:500}},[a("Button",{attrs:{icon:"md-refresh"},on:{click:function(e){t.showClearModal=!0}}})],1),t.showDataButtons?a("div",{staticClass:"inline"},[a("div",{staticClass:"inline"},[a("Divider",{attrs:{type:"vertical"}})],1),a("Tooltip",{attrs:{content:"Save selected flow",delay:500}},[a("Button",{on:{click:t.saveSelectedFlow}},[a("Icon",{attrs:{type:"md-mail"}})],1)],1),a("Tooltip",{attrs:{content:"Delete selected flow",delay:500}},[a("Button",{attrs:{icon:"md-trash"},on:{click:t.deleteSelectedFlow}})],1)],1):t._e(),a("div",{staticClass:"inline"},[a("Divider",{attrs:{type:"vertical"}})],1),a("label",[t._v("Activated Data:")]),a("div",{staticClass:"inline"},[a("Select",{staticStyle:{width:"15vw"},attrs:{filterable:"",clearable:""},model:{value:t.activatedGroupId,callback:function(e){t.activatedGroupId=e},expression:"activatedGroupId"}},[a("OptionGroup",{attrs:{label:"DataGroup"}},t._l(t.dataGroups,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)],1),a("div",{staticClass:"inline",staticStyle:{float:"right"}},[a("Input",{staticStyle:{width:"30vw"},attrs:{search:"",clearable:""},model:{value:t.searchStr,callback:function(e){t.searchStr=e},expression:"searchStr"}})],1),a("Modal",{attrs:{title:"Alert"},on:{"on-ok":t.clearModalOk,"on-cancel":function(e){t.showClearModal=!1}},model:{value:t.showClearModal,callback:function(e){t.showClearModal=e},expression:"showClearModal"}},[a("p",[t._v("Clear flow list?")])])],1)},z=[],K={recording:!1,type:"md-radio-button-on",color:"red",text:"Start recording"},Q={recording:!0,type:"md-square",color:"black",text:"Stop recording"},W={name:"buttonBar",components:{},data:function(){return{showClearModal:!1,showCreateGroupModal:!1,newDataGroupName:"",recordingBtn:K,searchStr:""}},mounted:function(){this.$store.dispatch("loadGroupList"),this.$store.dispatch("loadActivatedGroup"),this.getRecordStatus(),this.$Notice.config({top:75})},computed:{showDataButtons:function(){return this.$store.state.inspector.showDataButtons},dataGroups:function(){return this.$store.state.dataManager.groupList},activatedGroupId:{get:function(){return this.$store.state.inspector.activatedGroupId},set:function(t){this.$store.dispatch("activateGroup",t)}}},watch:{searchStr:function(){this.$store.commit("search",this.searchStr)}},methods:{switchRecord:function(){var t=this;this.recordingBtn.recording?this.$http.put("/api/mode/normal").then(function(e){t.recordingBtn=K,console.log("stop recording",e)},function(t){console.log("stop recording failed",response)}):("None"===this.selectedDataGroup&&(this.showCreateGroupModal=!0),this.$http.put("/api/mode/record").then(function(e){t.recordingBtn=Q,console.log("start recode",e)},function(t){console.log("start recode failed",t)}))},getRecordStatus:function(){var t=this;this.$http.get("/api/mode").then(function(e){"record"===e.data.mode?t.recordingBtn=Q:t.recordingBtn=K,console.log("get recode mode",e)},function(t){})},clearModalOk:function(){this.$http.delete("/api/flow").then(function(t){}),this.selectedFlow=null},resetActivatedData:function(){var t=this;this.$http.put("/api/mock/group/deactivate").then(function(e){console.log("reset group"),t.updateActivatedDataGroup()},function(t){})},filterMethod:function(t,e){return-1!==e.toUpperCase().indexOf(t.toUpperCase())},saveSelectedFlow:function(){var t=this;"None"!==this.selectedDataGroup?this.$http.post("/api/flow",{ids:this.$store.state.inspector.selectedIds,group:this.selectedDataGroup}).then(function(e){1e3===e.data.code?t.$Notice.success({title:"Flow saved",desc:e.data.message}):t.$Notice.error({title:"Save flow failed",desc:e.data,duration:0}),console.log("POST flow",t.$store.state.inspector.selectedIds,e)}):this.showCreateGroupModal=!0},deleteSelectedFlow:function(){var t=this;this.$http.delete("/api/flow",{body:{ids:this.$store.state.inspector.selectedIds}}).then(function(e){console.log("DEL flow",t.$store.state.inspector.selectedIds,e),t.$store.commit("clearSelectedId")})}}},Y=W,Z=(a("9e6e"),Object(r["a"])(Y,X,z,!1,null,null,null));Z.options.__file="ButtonBar.vue";var tt=Z.exports,et={recording:!1,type:"record",color:"red",text:"Start recording"},at={recording:!0,type:"stop",color:"black",text:"Stop recording"},nt={name:"Inspector",data:function(){return{showClearModal:!1,selectedFlow:null,recordingBtn:et,activatedData:null,selectedDataGroup:"",dataGroups:["None"],newDataGroupName:"",showCreateGroupModal:!1}},components:{flowList:L,flowDetail:H,buttonBar:tt},mounted:function(){this.getRecordStatus(),this.updateDataGroups(),this.updateActivatedDataGroup()},methods:{selectedFlowChange:function(t){this.selectedFlow=t},switchRecord:function(){var t=this;this.recordingBtn.recording?this.$http.put("/api/mode/normal").then(function(e){t.recordingBtn=et,console.log("stop recording",e)},function(t){console.log("stop recording failed",response)}):("None"===this.selectedDataGroup&&(this.showCreateGroupModal=!0),this.$http.put("/api/mode/record").then(function(e){t.recordingBtn=at,console.log("start recode",e)},function(t){console.log("start recode failed",t)}))},getRecordStatus:function(){var t=this;this.$http.get("/api/mode").then(function(e){"record"===e.data.mode?t.recordingBtn=at:t.recordingBtn=et,console.log("get recode mode",e)},function(t){})},clearModalOk:function(){this.$http.delete("/api/flow").then(function(t){}),this.selectedFlow=null},activateData:function(t){var e=this;"None"===t?this.resetActivatedData():this.$http.put("/api/mock/"+t+"/activate").then(function(a){console.log("activated group",t),e.updateActivatedDataGroup()},function(t){})},resetActivatedData:function(){var t=this;this.$http.put("/api/mock/group/deactivate").then(function(e){console.log("reset group"),t.updateActivatedDataGroup()},function(t){})},filterMethod:function(t,e){return-1!==e.toUpperCase().indexOf(t.toUpperCase())},updateDataGroups:function(){var t=this;this.$http.get("/api/mock").then(function(e){t.dataGroups=e.data,t.dataGroups.push("None")})},updateActivatedDataGroup:function(){var t=this;this.$http.get("/api/mock/activated").then(function(e){e.data.name?t.selectedDataGroup=e.data.name:t.selectedDataGroup="None",console.log("activated group",e)},function(t){})},activatedDataChange:function(t){console.log("Change",t),this.updateDataGroups(),this.activateData(t)},creatGroupModalOk:function(){var t=this,e=new FormData;e.append("name",this.newDataGroupName),e.append("data",'{"parent": null, "filters": []}'),e.append("origin_name","");var a=this.newDataGroupName;this.$http.post("/api/mock",e).then(function(e){console.log("Create data group success"),t.updateDataGroups(),t.activateData(a),t.newDataGroupName=null},function(e){t.newDataGroupName=null})}}},ot=nt,st=(a("4a0e"),Object(r["a"])(ot,b,w,!1,null,null,null));st.options.__file="Inspector.vue";var it=st.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("row",{staticClass:"button-bar"},[a("button-bar")],1),a("row",[a("i-col",{attrs:{span:"12"}},[a("data-list",{staticClass:"container-left"})],1),a("i-col",{attrs:{span:"12"}},[a("data-detail",{staticClass:"container-right"})],1)],1)],1)},rt=[],lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card",{attrs:{padding:5}},[a("label",[t._v("DataGroup:")]),a("div",{staticClass:"inline"},[a("i-select",{staticClass:"data-group",attrs:{filterable:"",clearable:""},on:{"on-change":t.onGroupSelected},model:{value:t.selectedDataGroup,callback:function(e){t.selectedDataGroup=e},expression:"selectedDataGroup"}},[a("option-group",{attrs:{label:"DataGroup"}},t._l(t.groupList,function(e){return a("i-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)],1),a("i-button",[t._v("NewGroup")]),a("i-button",[t._v("DeleteGroup")]),a("i-button",[t._v("NewData")]),a("i-button",[t._v("DeleteData")])],1)},dt=[],ut={mounted:function(){this.$store.dispatch("loadGroupList")},methods:{onGroupSelected:function(){this.$store.dispatch("loadDataList",this.selectedDataGroup)},activteCurrentGroup:function(){this.$store.dispatch("activateCurrentGroup")}},computed:{selectedDataGroup:{get:function(){return this.$store.state.dataManager.currentDataGroup},set:function(t){this.$store.commit("setCurrentDataGroup",t)}},groupList:function(){return this.$store.state.dataManager.groupList}}},ht=ut,ft=(a("5581"),Object(r["a"])(ht,lt,dt,!1,null,null,null));ft.options.__file="ButtonBar.vue";var pt=ft.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card",[a("div",{staticClass:"data-list"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAll,expression:"selectAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectAll)?t._i(t.selectAll,null)>-1:t.selectAll},on:{change:function(e){var a=t.selectAll,n=e.target,o=!!n.checked;if(Array.isArray(a)){var s=null,i=t._i(a,s);n.checked?i<0&&(t.selectAll=a.concat([s])):i>-1&&(t.selectAll=a.slice(0,i).concat(a.slice(i+1)))}else t.selectAll=o}}})]),a("th",[t._v("Name")])])]),a("tbody",t._l(t.dataItems,function(t,e){return a("data-list-item",{key:e,tag:"tr",attrs:{item:t}})}))])])])},vt=[],gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{class:t.foucs,on:{click:t.onClick}},[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selected)?t._i(t.selected,null)>-1:t.selected},on:{change:function(e){var a=t.selected,n=e.target,o=!!n.checked;if(Array.isArray(a)){var s=null,i=t._i(a,s);n.checked?i<0&&(t.selected=a.concat([s])):i>-1&&(t.selected=a.slice(0,i).concat(a.slice(i+1)))}else t.selected=o}}})]),a("td",[a("span",{staticClass:"path"},[t._v("\n            "+t._s(t.item.name)+"\n        ")])])])},bt=[],wt={props:["item"],computed:{selected:{get:function(){return this.$store.state.dataManager.selectedData.indexOf(this.item.id)>=0},set:function(t){t?this.$store.commit("addSelectedData",this.item.id):this.$store.commit("deleteSelectedData",this.item.id)}},foucs:function(){return{foucs:this.$store.state.dataManager.foucsData===this.item.id}}},methods:{onClick:function(){this.$store.commit("setFoucsData",this.item.id),this.$store.dispatch({type:"loadDataDetail",groupId:this.$store.state.dataManager.currentDataGroup,dataId:this.item.id})}}},Dt=wt,yt=(a("0343"),Object(r["a"])(Dt,gt,bt,!1,null,null,null));yt.options.__file="DataListItem.vue";var _t=yt.exports,kt={components:{DataListItem:_t},computed:{dataItems:function(){return this.$store.state.dataManager.dataList},selectAll:{get:function(){return this.$store.state.dataManager.dataList.length>0&&this.$store.state.dataManager.selectedData.length===this.$store.state.dataManager.dataList.length},set:function(t){t?this.$store.commit("selectAllData"):this.$store.commit("clearSelectedData")}}},methods:{}},Ct=kt,$t=(a("313f"),Object(r["a"])(Ct,mt,vt,!1,null,null,null));$t.options.__file="DataList.vue";var St=$t.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("card",[a("tabs",{attrs:{animated:!1},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("tab-pane",{attrs:{label:"Rule",name:"rule"}}),a("tab-pane",{attrs:{label:"Request",name:"req"}}),a("tab-pane",{attrs:{label:"RequestBody",name:"req-body"}}),a("tab-pane",{attrs:{label:"Response",name:"resp"}}),a("tab-pane",{attrs:{label:"ResponseBody",name:"resp-body"}})],1),t.dataDetail?a("code-editor",{staticStyle:{height:"500px"},attrs:{language:t.code.type},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}):t._e(),t.dataDetail?a("div",{staticClass:"button-bar"},[a("i-button",{attrs:{type:"primary",ghost:""},on:{click:t.save}},[t._v("Save")])],1):t._e()],1)},Gt=[],It={components:{CodeEditor:P},data:function(){return{currentTab:"rule"}},computed:{dataDetail:function(){return this.$store.state.dataManager.dataDetail},code:function(){var t={content:"",type:"json"};return"rule"===this.currentTab?(t.content=JSON.stringify(this.dataDetail.rule,null,4),t.type="json"):"req"===this.currentTab?(t.content=this.dataDetail.request.content,t.type=this.dataDetail.request.filetype):"req-body"===this.currentTab?this.dataDetail.request_data&&this.dataDetail.request_data.content?(t.content=this.dataDetail.request_data.content,t.type=this.dataDetail.request_data.filetype):(t.content="",t.type="text"):"resp"===this.currentTab?(t.content=this.dataDetail.response.content,t.type=this.dataDetail.response.filetype):"resp-body"===this.currentTab&&(this.dataDetail.response_data&&this.dataDetail.response_data.content?(t.content=this.dataDetail.response_data.content,t.type=this.dataDetail.response_data.filetype):(t.content="",t.type="text")),t},content:{get:function(){return this.code.content},set:function(t){var e=this.$store.state.dataManager.dataDetail;"rule"===this.currentTab&&(e.rule=JSON.parse(t)),this.$store.commit("setDataDetail",e)}}},methods:{parseBody:function(t,e){var a={type:"text",content:""};if(!t.hasOwnProperty("Content-Type"))return a;var n=t["Content-Type"];if(n.includes("html"))a.type="html",a.content=e;else if(n.includes("json"))a.type="json",a.content=JSON.stringify(e,null,4);else if(n.includes("xml"))a.type="xml",a.content=e;else try{a.content=JSON.stringify(e,null,4),a.type="json"}catch(o){a.type="text",a.content="Unreadable"}return a},save:function(){this.$store.dispatch("saveDataDetail",dataDetail)}}},Ot=It,At=(a("b349"),Object(r["a"])(Ot,xt,Gt,!1,null,null,null));At.options.__file="DataDetail.vue";var Tt=At.exports,Lt={components:{ButtonBar:pt,DataList:St,DataDetail:Tt}},Mt=Lt,Bt=(a("70d0"),Object(r["a"])(Mt,ct,rt,!1,null,null,null));Bt.options.__file="DataManager.vue";var Nt=Bt.exports,jt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ft=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[a("iframe",{staticClass:"plugin-frame",attrs:{src:"/plugin/demo",frameborder:"0"}})])}],qt={},Et=qt,Rt=(a("accb"),Object(r["a"])(Et,jt,Ft,!1,null,null,null));Rt.options.__file="PluginView.vue";var Pt=Rt.exports;n["default"].use(u["a"]);var Jt=new u["a"]({routes:[{path:"/",name:"inspector",component:g,children:[{path:"",component:it}]},{path:"/datamanager",name:"datamanager",component:g,children:[{path:"",component:Nt}]},{path:"/plugin",name:"plugin",component:g,children:[{path:"",component:Pt}]}]}),Ut=a("ade3"),Vt=a("2f62"),Ht=a("bc3a"),Xt=a.n(Ht),zt=function(){return Xt()({url:"/api/menu"})},Kt=function(){return Xt()({url:"/api/mock"})},Qt=function(t){return Xt()({url:"/api/mock/"+t})},Wt=function(t,e){return Xt()({url:"/api/mock/"+t+"/data/"+e})},Yt=function(t,e,a){return Xt()({url:"/api/mock/"+t+"/data/"+e,method:"PUT",data:JSON.stringify(a)})},Zt=function(){return Xt()({url:"/api/mock/activated"})},te=function(t){return Xt()({url:"/api/mock/"+t+"/activate",method:"PUT"})},ee={state:{activatedGroupId:null,showDataButtons:!1,searchStr:"",selectedIds:[]},mutations:{setActivitedGroupId:function(t,e){t.activatedGroupId=e},showDataButtons:function(t,e){t.showDataButtons=e},search:function(t,e){t.searchStr=e},addSelectedId:function(t,e){t.selectedIds.push(e)},clearSelectedId:function(t){t.selectedIds=[]},updateSelectedId:function(t,e){t.selectedIds=e},deleteSelectedId:function(t,e){index=t.selectedIds.indexOf(e),index<0||t.selectedIds.splice(index,1)}},actions:{loadActivatedGroup:function(t){var e=t.commit;Zt().then(function(t){e("setActivitedGroupId",t.data.id)}).catch(function(t){return console.log(t)})},activateGroup:function(t,e){var a=t.dispatch;te(e).then(function(t){a("loadActivatedGroup")}).catch(function(t){return console.log(t)})}}},ae={state:{groupList:[],currentDataGroup:null,dataList:[],foucsData:null,dataDetail:null,selectedData:[],editorCache:{rule:"",req:"",reqBody:"",resp:"",respBody:""}},mutations:{setGroupList:function(t,e){t.groupList=e},setCurrentDataGroup:function(t,e){t.currentDataGroup=e},setDataList:function(t,e){t.dataList=e},setDataDetail:function(t,e){t.dataDetail=e},setFoucsData:function(t,e){t.foucsData=e},deleteSelectedData:function(t,e){index=t.selectedData.indexOf(e),index<0||t.selectedData.splice(index,1)},addSelectedData:function(t,e){t.selectedData.push(e)},clearSelectedData:function(t){t.selectedData=[]},selectAllData:function(t){t.selectedData=[];var e=!0,a=!1,n=void 0;try{for(var o,s=t.dataList[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var i=o.value;t.selectedData.push(i.id)}}catch(c){a=!0,n=c}finally{try{e||null==s.return||s.return()}finally{if(a)throw n}}},setRule:function(t,e){t.editorCache.rule=e},setReq:function(t,e){t.editorCache.req=e},setReqBody:function(t,e){t.editorCache.reqBody=e},setResp:function(t,e){t.editorCache.resp=e},setRespBody:function(t,e){t.editorCache.respBody=e}},actions:{loadGroupList:function(t){var e=t.commit;Kt().then(function(t){e("setGroupList",t.data)}).catch(function(t){return console.log(t)})},loadDataList:function(t,e){var a=t.commit;Qt(e).then(function(t){a("setDataList",t.data.data_list),a("clearSelectedData")}).catch(function(t){return console.log(t)})},loadDataDetail:function(t,e){var a=t.commit;Wt(e.groupId,e.dataId).then(function(t){console.log(t.data),a("setDataDetail",t.data)}).catch(function(t){return console.log(t)})},saveDataDetail:function(t,e){var a=t.state,n=t.dispatch;groupName=a.currentDataGroup,dataName=a.foucsData,Yt(groupName,dataName,e).then(function(t){n("loadDataDetail",{groupName:groupName,dataName:dataName})}).catch(function(t){return console.log(t)})}}};n["default"].use(Vt["a"]);var ne=new Vt["a"].Store(Object(Ut["a"])({modules:{inspector:ee,dataManager:ae},state:{menu:null},mutations:{setMenu:function(t,e){t.menu=e}},actions:{loadMenu:function(t){var e=t.commit;zt().then(function(t){e("setMenu",t.data.menu)})}}},"modules",{inspector:ee,dataManager:ae})),oe=a("e069"),se=a.n(oe),ie=a("28dd");a("dcad");n["default"].config.productionTip=!1,n["default"].use(se.a),n["default"].use(ie["a"]),new n["default"]({router:Jt,store:ne,render:function(t){return t(d)}}).$mount("#app")},"62f9":function(t,e,a){},"64a9":function(t,e,a){},"692e":function(t,e,a){},"6ea4":function(t,e,a){},"70d0":function(t,e,a){"use strict";var n=a("62f9"),o=a.n(n);o.a},"7fd8":function(t,e,a){},"8fe0":function(t,e,a){"use strict";var n=a("ec40"),o=a.n(n);o.a},"937f":function(t,e,a){},"9e6e":function(t,e,a){"use strict";var n=a("a0a1"),o=a.n(n);o.a},a0a1:function(t,e,a){},accb:function(t,e,a){"use strict";var n=a("e6ec"),o=a.n(n);o.a},b349:function(t,e,a){"use strict";var n=a("7fd8"),o=a.n(n);o.a},b68c:function(t,e,a){"use strict";var n=a("067f"),o=a.n(n);o.a},e6ec:function(t,e,a){},ec40:function(t,e,a){},f84e:function(t,e,a){"use strict";var n=a("1a79"),o=a.n(n);o.a}});
//# sourceMappingURL=app.24ee43f4.js.map